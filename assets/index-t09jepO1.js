var pr=Object.defineProperty;var rt=a=>{throw TypeError(a)};var fr=(a,t,e)=>t in a?pr(a,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):a[t]=e;var z=(a,t,e)=>fr(a,typeof t!="symbol"?t+"":t,e),gr=(a,t,e)=>t.has(a)||rt("Cannot "+e);var st=(a,t,e)=>t.has(a)?rt("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(a):t.set(a,e);var te=(a,t,e)=>(gr(a,t,"access private method"),e);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))s(r);new MutationObserver(r=>{for(const i of r)if(i.type==="childList")for(const c of i.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&s(c)}).observe(document,{childList:!0,subtree:!0});function e(r){const i={};return r.integrity&&(i.integrity=r.integrity),r.referrerPolicy&&(i.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?i.credentials="include":r.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function s(r){if(r.ep)return;r.ep=!0;const i=e(r);fetch(r.href,i)}})();function P(...a){return{type:"string",buttons:a}}function D(...a){return{type:"chord",buttons:a}}function it(...a){return{type:"sweep",buttons:a}}function dr(a){return{type:"comment",text:a}}function lt(a){return{type:"button-abbreviation",abbreviation:a}}function kr(a){return{type:"string-abbreviation",abbreviation:a}}function br(a,t){function e(){this.constructor=a}e.prototype=t.prototype,a.prototype=new e}function G(a,t,e,s){var r=Error.call(this,a);return Object.setPrototypeOf&&Object.setPrototypeOf(r,G.prototype),r.expected=t,r.found=e,r.location=s,r.name="SyntaxError",r}br(G,Error);function Re(a,t,e){return e=e||" ",a.length>t?a:(t-=a.length,e+=e.repeat(t),a+e.slice(0,t))}G.prototype.format=function(a){var t="Error: "+this.message;if(this.location){var e=null,s;for(s=0;s<a.length;s++)if(a[s].source===this.location.source){e=a[s].text.split(/\r\n|\n|\r/g);break}var r=this.location.start,i=this.location.source&&typeof this.location.source.offset=="function"?this.location.source.offset(r):r,c=this.location.source+":"+i.line+":"+i.column;if(e){var h=this.location.end,p=Re("",i.line.toString().length," "),d=e[r.line-1],g=r.line===h.line?h.column:d.length+1,m=g-r.column||1;t+=`
 --> `+c+`
`+p+` |
`+i.line+" | "+d+`
`+p+" | "+Re("",r.column-1," ")+Re("",m,"^")}else t+=`
 at `+c}return t};G.buildMessage=function(a,t){var e={literal:function(d){return'"'+r(d.text)+'"'},class:function(d){var g=d.parts.map(function(m){return Array.isArray(m)?i(m[0])+"-"+i(m[1]):i(m)});return"["+(d.inverted?"^":"")+g.join("")+"]"},any:function(){return"any character"},end:function(){return"end of input"},other:function(d){return d.description}};function s(d){return d.charCodeAt(0).toString(16).toUpperCase()}function r(d){return d.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(g){return"\\x0"+s(g)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(g){return"\\x"+s(g)})}function i(d){return d.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(g){return"\\x0"+s(g)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(g){return"\\x"+s(g)})}function c(d){return e[d.type](d)}function h(d){var g=d.map(c),m,A;if(g.sort(),g.length>0){for(m=1,A=1;m<g.length;m++)g[m-1]!==g[m]&&(g[A]=g[m],A++);g.length=A}switch(g.length){case 1:return g[0];case 2:return g[0]+" or "+g[1];default:return g.slice(0,-1).join(", ")+", or "+g[g.length-1]}}function p(d){return d?'"'+r(d)+'"':"end of input"}return"Expected "+h(a)+" but "+p(t)+" found."};function xr(a,t){t=t!==void 0?t:{};var e={},s=t.grammarSource,r={Expression:Xe},i=Xe,c="(",h=")",p="EWGF",d="KI",g="HEAT",m="RA",A="[",T="]",S=",",E="hcb",_="hcf",Q="uhcb",K="uhcf",X="qcb",V="qcf",W="uqcb",Pe="uqcf",Fe="WR",Oe="iWR",Ze="wr",je="iwr",ce="~",U="+",Rt="n",Ct="f",zt="b",Et="F",_t="B",It="u",Bt="d",Dt="U",qt="D",Lt="1",Pt="2",Ft="3",Ot="4",Me=/^[^()]/,Ne=/^[a-zA-Z]/,Qe=/^[ \t\n\r]/,Zt=y("(",!1),We=$e(["(",")"],!0,!1),jt=y(")",!1),Mt=y("EWGF",!1),Nt=y("KI",!1),Qt=y("HEAT",!1),Wt=y("RA",!1),Ut=y("[",!1),Ue=$e([["a","z"],["A","Z"]],!1,!1),Ht=y("]",!1),ue=y(",",!1),Gt=y("hcb",!1),Kt=y("hcf",!1),Xt=y("uhcb",!1),Vt=y("uhcf",!1),Jt=y("qcb",!1),Yt=y("qcf",!1),en=y("uqcb",!1),tn=y("uqcf",!1),nn=y("WR",!1),rn=y("iWR",!1),sn=y("wr",!1),ln=y("iwr",!1),he=y("~",!1),O=y("+",!1),an=y("n",!1),on=y("f",!1),cn=y("b",!1),un=y("F",!1),hn=y("B",!1),pn=y("u",!1),fn=y("d",!1),gn=y("U",!1),dn=y("D",!1),kn=y("1",!1),bn=y("2",!1),xn=y("3",!1),mn=y("4",!1),wn=Nn("whitespace"),He=$e([" ","	",`
`,"\r"],!1,!1),$n=function(n,o){return[n].concat(o)},yn=function(n){return dr(n)},vn=function(n){return kr(n)},An=function(n,o){return{...o,stance:n}},Sn=function(n,o){return P(lt(n),...o)},Tn=function(n,o){return P(...n.buttons,o)},Rn=function(n){return P(lt(n))},Cn=function(n,o){return P(...n.buttons,...o.buttons)},zn=function(n,o){return P(...n.buttons,o)},En=function(n,o){return P(D(n),...o.map(f=>D(f)))},_n=function(n,o){return P(D(n),...o.map(f=>D(f)))},In=function(n,o){return P(n,...o)},Bn=function(n,o){return P(n,...o)},Dn=function(n,o){return D(n,o)},qn=function(n,o){return it(n,...o)},Ln=function(n,o){return it(n,...o)},Pn=function(n,o){return D(...n.buttons,...o.buttons)},Fn=function(n,o){return D(n,...o)},On=function(n,o){return D(n,...o)},Zn=function(n,o){return D(n,...o)},jn=function(n,o){return D(n,o)},l=0,pe=[{line:1,column:1}],B=0,we=[],b=0,fe;if("startRule"in t){if(!(t.startRule in r))throw new Error(`Can't start parsing from rule "`+t.startRule+'".');i=r[t.startRule]}function y(n,o){return{type:"literal",text:n,ignoreCase:o}}function $e(n,o,f){return{type:"class",parts:n,inverted:o,ignoreCase:f}}function Mn(){return{type:"end"}}function Nn(n){return{type:"other",description:n}}function Ge(n){var o=pe[n],f;if(o)return o;for(f=n-1;!pe[f];)f--;for(o=pe[f],o={line:o.line,column:o.column};f<n;)a.charCodeAt(f)===10?(o.line++,o.column=1):o.column++,f++;return pe[n]=o,o}function Ke(n,o,f){var u=Ge(n),k=Ge(o),w={source:s,start:{offset:n,line:u.line,column:u.column},end:{offset:o,line:k.line,column:k.column}};return w}function x(n){l<B||(l>B&&(B=l,we=[]),we.push(n))}function Qn(n,o,f){return new G(G.buildMessage(n,o),n,o,f)}function Xe(){var n,o,f,u,k,w;if(n=l,o=ye(),o!==e){for(f=[],u=l,k=nt(),k!==e?(w=ye(),w!==e?u=w:(l=u,u=e)):(l=u,u=e);u!==e;)f.push(u),u=l,k=nt(),k!==e?(w=ye(),w!==e?u=w:(l=u,u=e)):(l=u,u=e);n=$n(o,f)}else l=n,n=e;return n}function ye(){var n;return n=Wn(),n===e&&(n=Hn(),n===e&&(n=Un())),n}function Wn(){var n,o,f,u,k;if(n=l,a.charCodeAt(l)===40?(o=c,l++):(o=e,b===0&&x(Zt)),o!==e){if(f=l,u=[],Me.test(a.charAt(l))?(k=a.charAt(l),l++):(k=e,b===0&&x(We)),k!==e)for(;k!==e;)u.push(k),Me.test(a.charAt(l))?(k=a.charAt(l),l++):(k=e,b===0&&x(We));else u=e;u!==e?f=a.substring(f,l):f=u,f!==e?(a.charCodeAt(l)===41?(u=h,l++):(u=e,b===0&&x(jt)),u!==e?n=yn(f):(l=n,n=e)):(l=n,n=e)}else l=n,n=e;return n}function Un(){var n,o;return n=l,a.substr(l,4)===p?(o=p,l+=4):(o=e,b===0&&x(Mt)),o===e&&(a.substr(l,2)===d?(o=d,l+=2):(o=e,b===0&&x(Nt)),o===e&&(a.substr(l,4)===g?(o=g,l+=4):(o=e,b===0&&x(Qt)),o===e&&(a.substr(l,2)===m?(o=m,l+=2):(o=e,b===0&&x(Wt))))),o!==e&&(o=vn(o)),n=o,n}function Hn(){var n,o,f;return n=l,o=Gn(),o===e&&(o=null),f=Kn(),f!==e?n=An(o,f):(l=n,n=e),n}function Gn(){var n,o,f,u,k;if(n=l,a.charCodeAt(l)===91?(o=A,l++):(o=e,b===0&&x(Ut)),o!==e){if(f=l,u=[],Ne.test(a.charAt(l))?(k=a.charAt(l),l++):(k=e,b===0&&x(Ue)),k!==e)for(;k!==e;)u.push(k),Ne.test(a.charAt(l))?(k=a.charAt(l),l++):(k=e,b===0&&x(Ue));else u=e;u!==e?f=a.substring(f,l):f=u,f!==e?(a.charCodeAt(l)===93?(u=T,l++):(u=e,b===0&&x(Ht)),u!==e?n=f:(l=n,n=e)):(l=n,n=e)}else l=n,n=e;return n}function Kn(){var n;return n=Se(),n===e&&(n=Xn(),n===e&&(n=Yn(),n===e&&(n=sr()))),n}function Xn(){var n;return n=Vn(),n===e&&(n=Jn(),n===e&&(n=ve())),n}function Vn(){var n,o,f;return n=l,o=ve(),o!==e?(a.charCodeAt(l)===44?l++:b===0&&x(ue),f=Se(),f!==e?n=Sn(o,f):(l=n,n=e)):(l=n,n=e),n}function Jn(){var n,o,f;return n=l,o=ve(),o!==e?(a.charCodeAt(l)===44?l++:b===0&&x(ue),f=J(),f!==e?n=Tn(o,f):(l=n,n=e)):(l=n,n=e),n}function ve(){var n,o;return n=l,a.substr(l,3)===E?(o=E,l+=3):(o=e,b===0&&x(Gt)),o===e&&(a.substr(l,3)===_?(o=_,l+=3):(o=e,b===0&&x(Kt)),o===e&&(a.substr(l,4)===Q?(o=Q,l+=4):(o=e,b===0&&x(Xt)),o===e&&(a.substr(l,4)===K?(o=K,l+=4):(o=e,b===0&&x(Vt)),o===e&&(a.substr(l,3)===X?(o=X,l+=3):(o=e,b===0&&x(Jt)),o===e&&(a.substr(l,3)===V?(o=V,l+=3):(o=e,b===0&&x(Yt)),o===e&&(a.substr(l,4)===W?(o=W,l+=4):(o=e,b===0&&x(en)),o===e&&(a.substr(l,4)===Pe?(o=Pe,l+=4):(o=e,b===0&&x(tn)),o===e&&(a.substr(l,2)===Fe?(o=Fe,l+=2):(o=e,b===0&&x(nn)),o===e&&(a.substr(l,3)===Oe?(o=Oe,l+=3):(o=e,b===0&&x(rn)),o===e&&(a.substr(l,2)===Ze?(o=Ze,l+=2):(o=e,b===0&&x(sn)),o===e&&(a.substr(l,3)===je?(o=je,l+=3):(o=e,b===0&&x(ln))))))))))))),o!==e&&(o=Rn(o)),n=o,n}function Yn(){var n;return n=er(),n===e&&(n=tr(),n===e&&(n=Ae())),n}function er(){var n,o,f;return n=l,o=Ae(),o!==e?(f=Se(),f!==e?n=Cn(o,f):(l=n,n=e)):(l=n,n=e),n}function tr(){var n,o,f;return n=l,o=Ae(),o!==e?(f=J(),f!==e?n=zn(o,f):(l=n,n=e)):(l=n,n=e),n}function Ae(){var n;return n=nr(),n===e&&(n=rr()),n}function nr(){var n,o,f,u;if(n=l,o=ee(),o!==e){if(f=[],u=ee(),u!==e)for(;u!==e;)f.push(u),u=ee();else f=e;f!==e?n=En(o,f):(l=n,n=e)}else l=n,n=e;return n}function rr(){var n,o,f,u;if(n=l,o=Y(),o!==e){if(f=[],u=Y(),u!==e)for(;u!==e;)f.push(u),u=Y();else f=e;f!==e?n=_n(o,f):(l=n,n=e)}else l=n,n=e;return n}function Se(){var n,o,f,u;if(n=l,o=J(),o===e&&(o=Je()),o!==e){if(f=[],u=J(),u!==e)for(;u!==e;)f.push(u),u=J();else f=e;f!==e?n=In(o,f):(l=n,n=e)}else l=n,n=e;return n}function J(){var n;return n=Ve(),n===e&&(n=Ye()),n}function sr(){var n,o,f,u,k,w;if(n=l,o=Te(),o!==e){for(f=[],u=l,a.charCodeAt(l)===44?(k=S,l++):(k=e,b===0&&x(ue)),k!==e?(w=Te(),w!==e?u=w:(l=u,u=e)):(l=u,u=e);u!==e;)f.push(u),u=l,a.charCodeAt(l)===44?(k=S,l++):(k=e,b===0&&x(ue)),k!==e?(w=Te(),w!==e?u=w:(l=u,u=e)):(l=u,u=e);n=Bn(o,f)}else l=n,n=e;return n}function Te(){var n;return n=ir(),n===e&&(n=lr()),n}function ir(){var n;return n=ar(),n===e&&(n=or()),n}function lr(){var n;return n=Je(),n===e&&(n=tt(),n===e&&(n=cr())),n}function ar(){var n,o,f;return n=l,o=et(),o!==e?(f=Ve(),f!==e?n=Dn(o,f):(l=n,n=e)):(l=n,n=e),n}function Ve(){var n,o,f,u,k,w;if(n=l,o=Z(),o!==e){if(f=[],u=l,a.charCodeAt(l)===126?(k=ce,l++):(k=e,b===0&&x(he)),k!==e?(w=Z(),w!==e?u=w:(l=u,u=e)):(l=u,u=e),u!==e)for(;u!==e;)f.push(u),u=l,a.charCodeAt(l)===126?(k=ce,l++):(k=e,b===0&&x(he)),k!==e?(w=Z(),w!==e?u=w:(l=u,u=e)):(l=u,u=e);else f=e;f!==e?n=qn(o,f):(l=n,n=e)}else l=n,n=e;return n}function or(){var n,o,f,u,k,w;if(n=l,o=H(),o!==e){if(f=[],u=l,a.charCodeAt(l)===126?(k=ce,l++):(k=e,b===0&&x(he)),k!==e?(w=H(),w!==e?u=w:(l=u,u=e)):(l=u,u=e),u!==e)for(;u!==e;)f.push(u),u=l,a.charCodeAt(l)===126?(k=ce,l++):(k=e,b===0&&x(he)),k!==e?(w=H(),w!==e?u=w:(l=u,u=e)):(l=u,u=e);else f=e;f!==e?n=Ln(o,f):(l=n,n=e)}else l=n,n=e;return n}function Je(){var n,o,f;return n=l,o=et(),o!==e?(a.charCodeAt(l)===43?l++:b===0&&x(O),f=Ye(),f!==e?n=Pn(o,f):(l=n,n=e)):(l=n,n=e),n}function cr(){var n,o,f,u,k,w;if(n=l,o=H(),o!==e){for(f=[],u=l,a.charCodeAt(l)===43?(k=U,l++):(k=e,b===0&&x(O)),k!==e?(w=H(),w!==e?u=w:(l=u,u=e)):(l=u,u=e);u!==e;)f.push(u),u=l,a.charCodeAt(l)===43?(k=U,l++):(k=e,b===0&&x(O)),k!==e?(w=H(),w!==e?u=w:(l=u,u=e)):(l=u,u=e);n=Fn(o,f)}else l=n,n=e;return n}function Ye(){var n,o,f,u,k,w;if(n=l,o=Z(),o!==e){for(f=[],u=l,a.charCodeAt(l)===43?(k=U,l++):(k=e,b===0&&x(O)),k!==e?(w=Z(),w!==e?u=w:(l=u,u=e)):(l=u,u=e);u!==e;)f.push(u),u=l,a.charCodeAt(l)===43?(k=U,l++):(k=e,b===0&&x(O)),k!==e?(w=Z(),w!==e?u=w:(l=u,u=e)):(l=u,u=e);n=On(o,f)}else l=n,n=e;return n}function et(){var n;return n=tt(),n===e&&(n=ur()),n}function ur(){var n,o,f,u,k,w;if(n=l,o=ge(),o!==e){for(f=[],u=l,a.charCodeAt(l)===43?(k=U,l++):(k=e,b===0&&x(O)),k!==e?(w=ge(),w!==e?u=w:(l=u,u=e)):(l=u,u=e);u!==e;)f.push(u),u=l,a.charCodeAt(l)===43?(k=U,l++):(k=e,b===0&&x(O)),k!==e?(w=ge(),w!==e?u=w:(l=u,u=e)):(l=u,u=e);n=Zn(o,f)}else l=n,n=e;return n}function tt(){var n,o,f;return n=l,o=ee(),o!==e?(f=Y(),f!==e?n=jn(o,f):(l=n,n=e)):(l=n,n=e),n}function H(){var n;return n=Z(),n===e&&(n=ge()),n}function ge(){var n;return n=Y(),n===e&&(n=ee(),n===e&&(n=hr())),n}function hr(){var n;return a.charCodeAt(l)===110?(n=Rt,l++):(n=e,b===0&&x(an)),n}function Y(){var n;return a.charCodeAt(l)===102?(n=Ct,l++):(n=e,b===0&&x(on)),n===e&&(a.charCodeAt(l)===98?(n=zt,l++):(n=e,b===0&&x(cn)),n===e&&(a.charCodeAt(l)===70?(n=Et,l++):(n=e,b===0&&x(un)),n===e&&(a.charCodeAt(l)===66?(n=_t,l++):(n=e,b===0&&x(hn))))),n}function ee(){var n;return a.charCodeAt(l)===117?(n=It,l++):(n=e,b===0&&x(pn)),n===e&&(a.charCodeAt(l)===100?(n=Bt,l++):(n=e,b===0&&x(fn)),n===e&&(a.charCodeAt(l)===85?(n=Dt,l++):(n=e,b===0&&x(gn)),n===e&&(a.charCodeAt(l)===68?(n=qt,l++):(n=e,b===0&&x(dn))))),n}function Z(){var n;return a.charCodeAt(l)===49?(n=Lt,l++):(n=e,b===0&&x(kn)),n===e&&(a.charCodeAt(l)===50?(n=Pt,l++):(n=e,b===0&&x(bn)),n===e&&(a.charCodeAt(l)===51?(n=Ft,l++):(n=e,b===0&&x(xn)),n===e&&(a.charCodeAt(l)===52?(n=Ot,l++):(n=e,b===0&&x(mn))))),n}function nt(){var n,o;if(b++,n=[],Qe.test(a.charAt(l))?(o=a.charAt(l),l++):(o=e,b===0&&x(He)),o!==e)for(;o!==e;)n.push(o),Qe.test(a.charAt(l))?(o=a.charAt(l),l++):(o=e,b===0&&x(He));else n=e;return b--,n===e&&(o=e,b===0&&x(wn)),n}if(fe=i(),fe!==e&&l===a.length)return fe;throw fe!==e&&l<a.length&&x(Mn()),Qn(we,B<a.length?a.charAt(B):null,B<a.length?Ke(B,B+1):Ke(B,B))}var $;(a=>{a.string=(t,e=null)=>({type:"string",buttons:t,stance:e}),a.sweep=(...t)=>({type:"sweep",buttons:t}),a.chord=(...t)=>({type:"chord",buttons:t})})($||($={}));const j=a=>({type:"glyph",glyph:a}),mr=a=>({type:"stance",text:a}),wr=a=>({type:"comment",text:a}),$r=a=>"fbudFBUDn".includes(a),pt=a=>{const t=[],e=[];for(const s of a)$r(s)?t.push(s):e.push(s);return[t,e]},ft=a=>{if(a.length!==0)return j(`buttons/${a.sort().join("")}`)},gt=a=>{if(a.length===0)return;if(a.includes("n"))return j("star");const t=a.filter(r=>"udUD".includes(r)),e=a.filter(r=>"fbFB".includes(r));if(t.length>1||e.length>1)throw RangeError(`unexpected directions ${a}`);let s="";if(t.length===0)switch(e[0]){case"f":case"F":s="forward";break;case"b":case"B":s="back";break}else if(e.length===0)switch(t[0]){case"u":case"U":s="up";break;case"d":case"D":s="down";break}else{const r=t[0],i=e[0];switch(`${r}${i}`.toLowerCase()){case"uf":s="up-forward";break;case"ub":s="up-back";break;case"df":s="down-forward";break;case"db":s="down-back";break}}return a.some(r=>"FBUD".includes(r))?j(`arrows/filled/${s}`):j(`arrows/line/${s}`)},v=a=>{const[t,e]=pt(a.buttons),s=[gt(t)].filter(Boolean),r=[ft(e)].filter(Boolean);return s.concat(r)},yr=a=>{const[t,e]=pt(a.buttons),s=[gt(t)].filter(Boolean),r=e.flatMap(i=>[ft([i])].filter(Boolean));return[...s,j("bracket-left"),...r,j("bracket-right")]},vr=a=>{switch(a.abbreviation){case"hcb":return[v($.chord("f")),v($.chord("d","f")),v($.chord("d")),v($.chord("d","b")),v($.chord("b"))].flat();case"hcf":return[v($.chord("b")),v($.chord("d","b")),v($.chord("d")),v($.chord("d","f")),v($.chord("f"))].flat();case"uhcb":return[v($.chord("f")),v($.chord("u","f")),v($.chord("u")),v($.chord("u","b")),v($.chord("b"))].flat();case"uhcf":return[v($.chord("b")),v($.chord("u","b")),v($.chord("u")),v($.chord("u","f")),v($.chord("f"))].flat();case"qcb":return[v($.chord("d")),v($.chord("d","b")),v($.chord("b"))].flat();case"qcf":return[v($.chord("d")),v($.chord("d","f")),v($.chord("f"))].flat();case"uqcb":return[v($.chord("u")),v($.chord("u","b")),v($.chord("b"))].flat();case"uqcf":return[v($.chord("u")),v($.chord("u","b")),v($.chord("b"))].flat();case"WR":case"iWR":case"wr":case"iwr":return[v($.chord("f")),v($.chord("f")),v($.chord("F"))].flat()}},se=a=>{const t=a.stance?[mr(a.stance)]:[],e=a.buttons.flatMap(s=>{switch(s.type){case"sweep":return yr(s);case"chord":return v(s);case"button-abbreviation":return vr(s)}});return t.concat(e)},Ar=a=>{switch(a.abbreviation){case"EWGF":return se($.string([$.chord("f"),$.chord("n"),$.chord("d"),$.chord("d","f"),$.chord("2")]));case"KI":return se($.string([$.chord("1","2","3","4")]));case"HEAT":return se($.string([$.chord("2","3")]));case"RA":return se($.string([$.chord("d","f","1","2")]))}},Sr=a=>a.map(t=>{switch(t.type){case"string":return se(t);case"string-abbreviation":return Ar(t);case"comment":return[wr(t.text)]}}).reduce((t,e)=>[...t,[j("divider")],e],[]).slice(1).flat(1/0),Tr=a=>{try{const t=xr(a);return Sr(t)}catch(t){return console.error(t),[]}},Rr=a=>{switch(a.type){case"glyph":switch(a.glyph){case"bracket-left":return"[";case"bracket-right":return"]";case"divider":return",";default:return`<img src="/tekken-md/icons/${a.glyph}.svg" width="16px" height="16px">`}case"stance":return`[${a.text}]&nbsp;`;case"comment":return`(${a.text})`}},Cr=/\{tk:(.*)\}/,zr=/^\{tk:(.*)\}/,Er=()=>({extensions:[{name:"tekken",level:"inline",start(a){var t;return(t=a.match(Cr))==null?void 0:t.index},tokenizer(a,t){const e=zr.exec(a);if(!e)return;const s=Tr(e[1].trim());return{type:"tekken",raw:e[0],tekkenTokens:s}},renderer(a){var t;return(t=a.tekkenTokens)==null?void 0:t.map(e=>Rr(e)).join("")}}]});function Ee(){return{async:!1,breaks:!1,extensions:null,gfm:!0,hooks:null,pedantic:!1,renderer:null,silent:!1,tokenizer:null,walkTokens:null}}let N=Ee();function dt(a){N=a}const kt=/[&<>"']/,_r=new RegExp(kt.source,"g"),bt=/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/,Ir=new RegExp(bt.source,"g"),Br={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},at=a=>Br[a];function I(a,t){if(t){if(kt.test(a))return a.replace(_r,at)}else if(bt.test(a))return a.replace(Ir,at);return a}const Dr=/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/ig;function qr(a){return a.replace(Dr,(t,e)=>(e=e.toLowerCase(),e==="colon"?":":e.charAt(0)==="#"?e.charAt(1)==="x"?String.fromCharCode(parseInt(e.substring(2),16)):String.fromCharCode(+e.substring(1)):""))}const Lr=/(^|[^\[])\^/g;function C(a,t){let e=typeof a=="string"?a:a.source;t=t||"";const s={replace:(r,i)=>{let c=typeof i=="string"?i:i.source;return c=c.replace(Lr,"$1"),e=e.replace(r,c),s},getRegex:()=>new RegExp(e,t)};return s}function ot(a){try{a=encodeURI(a).replace(/%25/g,"%")}catch{return null}return a}const ie={exec:()=>null};function ct(a,t){const e=a.replace(/\|/g,(i,c,h)=>{let p=!1,d=c;for(;--d>=0&&h[d]==="\\";)p=!p;return p?"|":" |"}),s=e.split(/ \|/);let r=0;if(s[0].trim()||s.shift(),s.length>0&&!s[s.length-1].trim()&&s.pop(),t)if(s.length>t)s.splice(t);else for(;s.length<t;)s.push("");for(;r<s.length;r++)s[r]=s[r].trim().replace(/\\\|/g,"|");return s}function ne(a,t,e){const s=a.length;if(s===0)return"";let r=0;for(;r<s;){const i=a.charAt(s-r-1);if(i===t&&!e)r++;else if(i!==t&&e)r++;else break}return a.slice(0,s-r)}function Pr(a,t){if(a.indexOf(t[1])===-1)return-1;let e=0;for(let s=0;s<a.length;s++)if(a[s]==="\\")s++;else if(a[s]===t[0])e++;else if(a[s]===t[1]&&(e--,e<0))return s;return-1}function ut(a,t,e,s){const r=t.href,i=t.title?I(t.title):null,c=a[1].replace(/\\([\[\]])/g,"$1");if(a[0].charAt(0)!=="!"){s.state.inLink=!0;const h={type:"link",raw:e,href:r,title:i,text:c,tokens:s.inlineTokens(c)};return s.state.inLink=!1,h}return{type:"image",raw:e,href:r,title:i,text:I(c)}}function Fr(a,t){const e=a.match(/^(\s+)(?:```)/);if(e===null)return t;const s=e[1];return t.split(`
`).map(r=>{const i=r.match(/^\s+/);if(i===null)return r;const[c]=i;return c.length>=s.length?r.slice(s.length):r}).join(`
`)}class ke{constructor(t){z(this,"options");z(this,"rules");z(this,"lexer");this.options=t||N}space(t){const e=this.rules.block.newline.exec(t);if(e&&e[0].length>0)return{type:"space",raw:e[0]}}code(t){const e=this.rules.block.code.exec(t);if(e){const s=e[0].replace(/^ {1,4}/gm,"");return{type:"code",raw:e[0],codeBlockStyle:"indented",text:this.options.pedantic?s:ne(s,`
`)}}}fences(t){const e=this.rules.block.fences.exec(t);if(e){const s=e[0],r=Fr(s,e[3]||"");return{type:"code",raw:s,lang:e[2]?e[2].trim().replace(this.rules.inline.anyPunctuation,"$1"):e[2],text:r}}}heading(t){const e=this.rules.block.heading.exec(t);if(e){let s=e[2].trim();if(/#$/.test(s)){const r=ne(s,"#");(this.options.pedantic||!r||/ $/.test(r))&&(s=r.trim())}return{type:"heading",raw:e[0],depth:e[1].length,text:s,tokens:this.lexer.inline(s)}}}hr(t){const e=this.rules.block.hr.exec(t);if(e)return{type:"hr",raw:ne(e[0],`
`)}}blockquote(t){const e=this.rules.block.blockquote.exec(t);if(e){let s=ne(e[0],`
`).split(`
`),r="",i="";const c=[];for(;s.length>0;){let h=!1;const p=[];let d;for(d=0;d<s.length;d++)if(/^ {0,3}>/.test(s[d]))p.push(s[d]),h=!0;else if(!h)p.push(s[d]);else break;s=s.slice(d);const g=p.join(`
`),m=g.replace(/\n {0,3}((?:=+|-+) *)(?=\n|$)/g,`
    $1`).replace(/^ {0,3}>[ \t]?/gm,"");r=r?`${r}
${g}`:g,i=i?`${i}
${m}`:m;const A=this.lexer.state.top;if(this.lexer.state.top=!0,this.lexer.blockTokens(m,c,!0),this.lexer.state.top=A,s.length===0)break;const T=c[c.length-1];if((T==null?void 0:T.type)==="code")break;if((T==null?void 0:T.type)==="blockquote"){const S=T,E=S.raw+`
`+s.join(`
`),_=this.blockquote(E);c[c.length-1]=_,r=r.substring(0,r.length-S.raw.length)+_.raw,i=i.substring(0,i.length-S.text.length)+_.text;break}else if((T==null?void 0:T.type)==="list"){const S=T,E=S.raw+`
`+s.join(`
`),_=this.list(E);c[c.length-1]=_,r=r.substring(0,r.length-T.raw.length)+_.raw,i=i.substring(0,i.length-S.raw.length)+_.raw,s=E.substring(c[c.length-1].raw.length).split(`
`);continue}}return{type:"blockquote",raw:r,tokens:c,text:i}}}list(t){let e=this.rules.block.list.exec(t);if(e){let s=e[1].trim();const r=s.length>1,i={type:"list",raw:"",ordered:r,start:r?+s.slice(0,-1):"",loose:!1,items:[]};s=r?`\\d{1,9}\\${s.slice(-1)}`:`\\${s}`,this.options.pedantic&&(s=r?s:"[*+-]");const c=new RegExp(`^( {0,3}${s})((?:[	 ][^\\n]*)?(?:\\n|$))`);let h=!1;for(;t;){let p=!1,d="",g="";if(!(e=c.exec(t))||this.rules.block.hr.test(t))break;d=e[0],t=t.substring(d.length);let m=e[2].split(`
`,1)[0].replace(/^\t+/,Q=>" ".repeat(3*Q.length)),A=t.split(`
`,1)[0],T=!m.trim(),S=0;if(this.options.pedantic?(S=2,g=m.trimStart()):T?S=e[1].length+1:(S=e[2].search(/[^ ]/),S=S>4?1:S,g=m.slice(S),S+=e[1].length),T&&/^ *$/.test(A)&&(d+=A+`
`,t=t.substring(A.length+1),p=!0),!p){const Q=new RegExp(`^ {0,${Math.min(3,S-1)}}(?:[*+-]|\\d{1,9}[.)])((?:[ 	][^\\n]*)?(?:\\n|$))`),K=new RegExp(`^ {0,${Math.min(3,S-1)}}((?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$)`),X=new RegExp(`^ {0,${Math.min(3,S-1)}}(?:\`\`\`|~~~)`),V=new RegExp(`^ {0,${Math.min(3,S-1)}}#`);for(;t;){const W=t.split(`
`,1)[0];if(A=W,this.options.pedantic&&(A=A.replace(/^ {1,4}(?=( {4})*[^ ])/g,"  ")),X.test(A)||V.test(A)||Q.test(A)||K.test(t))break;if(A.search(/[^ ]/)>=S||!A.trim())g+=`
`+A.slice(S);else{if(T||m.search(/[^ ]/)>=4||X.test(m)||V.test(m)||K.test(m))break;g+=`
`+A}!T&&!A.trim()&&(T=!0),d+=W+`
`,t=t.substring(W.length+1),m=A.slice(S)}}i.loose||(h?i.loose=!0:/\n *\n *$/.test(d)&&(h=!0));let E=null,_;this.options.gfm&&(E=/^\[[ xX]\] /.exec(g),E&&(_=E[0]!=="[ ] ",g=g.replace(/^\[[ xX]\] +/,""))),i.items.push({type:"list_item",raw:d,task:!!E,checked:_,loose:!1,text:g,tokens:[]}),i.raw+=d}i.items[i.items.length-1].raw=i.items[i.items.length-1].raw.trimEnd(),i.items[i.items.length-1].text=i.items[i.items.length-1].text.trimEnd(),i.raw=i.raw.trimEnd();for(let p=0;p<i.items.length;p++)if(this.lexer.state.top=!1,i.items[p].tokens=this.lexer.blockTokens(i.items[p].text,[]),!i.loose){const d=i.items[p].tokens.filter(m=>m.type==="space"),g=d.length>0&&d.some(m=>/\n.*\n/.test(m.raw));i.loose=g}if(i.loose)for(let p=0;p<i.items.length;p++)i.items[p].loose=!0;return i}}html(t){const e=this.rules.block.html.exec(t);if(e)return{type:"html",block:!0,raw:e[0],pre:e[1]==="pre"||e[1]==="script"||e[1]==="style",text:e[0]}}def(t){const e=this.rules.block.def.exec(t);if(e){const s=e[1].toLowerCase().replace(/\s+/g," "),r=e[2]?e[2].replace(/^<(.*)>$/,"$1").replace(this.rules.inline.anyPunctuation,"$1"):"",i=e[3]?e[3].substring(1,e[3].length-1).replace(this.rules.inline.anyPunctuation,"$1"):e[3];return{type:"def",tag:s,raw:e[0],href:r,title:i}}}table(t){const e=this.rules.block.table.exec(t);if(!e||!/[:|]/.test(e[2]))return;const s=ct(e[1]),r=e[2].replace(/^\||\| *$/g,"").split("|"),i=e[3]&&e[3].trim()?e[3].replace(/\n[ \t]*$/,"").split(`
`):[],c={type:"table",raw:e[0],header:[],align:[],rows:[]};if(s.length===r.length){for(const h of r)/^ *-+: *$/.test(h)?c.align.push("right"):/^ *:-+: *$/.test(h)?c.align.push("center"):/^ *:-+ *$/.test(h)?c.align.push("left"):c.align.push(null);for(let h=0;h<s.length;h++)c.header.push({text:s[h],tokens:this.lexer.inline(s[h]),header:!0,align:c.align[h]});for(const h of i)c.rows.push(ct(h,c.header.length).map((p,d)=>({text:p,tokens:this.lexer.inline(p),header:!1,align:c.align[d]})));return c}}lheading(t){const e=this.rules.block.lheading.exec(t);if(e)return{type:"heading",raw:e[0],depth:e[2].charAt(0)==="="?1:2,text:e[1],tokens:this.lexer.inline(e[1])}}paragraph(t){const e=this.rules.block.paragraph.exec(t);if(e){const s=e[1].charAt(e[1].length-1)===`
`?e[1].slice(0,-1):e[1];return{type:"paragraph",raw:e[0],text:s,tokens:this.lexer.inline(s)}}}text(t){const e=this.rules.block.text.exec(t);if(e)return{type:"text",raw:e[0],text:e[0],tokens:this.lexer.inline(e[0])}}escape(t){const e=this.rules.inline.escape.exec(t);if(e)return{type:"escape",raw:e[0],text:I(e[1])}}tag(t){const e=this.rules.inline.tag.exec(t);if(e)return!this.lexer.state.inLink&&/^<a /i.test(e[0])?this.lexer.state.inLink=!0:this.lexer.state.inLink&&/^<\/a>/i.test(e[0])&&(this.lexer.state.inLink=!1),!this.lexer.state.inRawBlock&&/^<(pre|code|kbd|script)(\s|>)/i.test(e[0])?this.lexer.state.inRawBlock=!0:this.lexer.state.inRawBlock&&/^<\/(pre|code|kbd|script)(\s|>)/i.test(e[0])&&(this.lexer.state.inRawBlock=!1),{type:"html",raw:e[0],inLink:this.lexer.state.inLink,inRawBlock:this.lexer.state.inRawBlock,block:!1,text:e[0]}}link(t){const e=this.rules.inline.link.exec(t);if(e){const s=e[2].trim();if(!this.options.pedantic&&/^</.test(s)){if(!/>$/.test(s))return;const c=ne(s.slice(0,-1),"\\");if((s.length-c.length)%2===0)return}else{const c=Pr(e[2],"()");if(c>-1){const p=(e[0].indexOf("!")===0?5:4)+e[1].length+c;e[2]=e[2].substring(0,c),e[0]=e[0].substring(0,p).trim(),e[3]=""}}let r=e[2],i="";if(this.options.pedantic){const c=/^([^'"]*[^\s])\s+(['"])(.*)\2/.exec(r);c&&(r=c[1],i=c[3])}else i=e[3]?e[3].slice(1,-1):"";return r=r.trim(),/^</.test(r)&&(this.options.pedantic&&!/>$/.test(s)?r=r.slice(1):r=r.slice(1,-1)),ut(e,{href:r&&r.replace(this.rules.inline.anyPunctuation,"$1"),title:i&&i.replace(this.rules.inline.anyPunctuation,"$1")},e[0],this.lexer)}}reflink(t,e){let s;if((s=this.rules.inline.reflink.exec(t))||(s=this.rules.inline.nolink.exec(t))){const r=(s[2]||s[1]).replace(/\s+/g," "),i=e[r.toLowerCase()];if(!i){const c=s[0].charAt(0);return{type:"text",raw:c,text:c}}return ut(s,i,s[0],this.lexer)}}emStrong(t,e,s=""){let r=this.rules.inline.emStrongLDelim.exec(t);if(!r||r[3]&&s.match(/[\p{L}\p{N}]/u))return;if(!(r[1]||r[2]||"")||!s||this.rules.inline.punctuation.exec(s)){const c=[...r[0]].length-1;let h,p,d=c,g=0;const m=r[0][0]==="*"?this.rules.inline.emStrongRDelimAst:this.rules.inline.emStrongRDelimUnd;for(m.lastIndex=0,e=e.slice(-1*t.length+c);(r=m.exec(e))!=null;){if(h=r[1]||r[2]||r[3]||r[4]||r[5]||r[6],!h)continue;if(p=[...h].length,r[3]||r[4]){d+=p;continue}else if((r[5]||r[6])&&c%3&&!((c+p)%3)){g+=p;continue}if(d-=p,d>0)continue;p=Math.min(p,p+d+g);const A=[...r[0]][0].length,T=t.slice(0,c+r.index+A+p);if(Math.min(c,p)%2){const E=T.slice(1,-1);return{type:"em",raw:T,text:E,tokens:this.lexer.inlineTokens(E)}}const S=T.slice(2,-2);return{type:"strong",raw:T,text:S,tokens:this.lexer.inlineTokens(S)}}}}codespan(t){const e=this.rules.inline.code.exec(t);if(e){let s=e[2].replace(/\n/g," ");const r=/[^ ]/.test(s),i=/^ /.test(s)&&/ $/.test(s);return r&&i&&(s=s.substring(1,s.length-1)),s=I(s,!0),{type:"codespan",raw:e[0],text:s}}}br(t){const e=this.rules.inline.br.exec(t);if(e)return{type:"br",raw:e[0]}}del(t){const e=this.rules.inline.del.exec(t);if(e)return{type:"del",raw:e[0],text:e[2],tokens:this.lexer.inlineTokens(e[2])}}autolink(t){const e=this.rules.inline.autolink.exec(t);if(e){let s,r;return e[2]==="@"?(s=I(e[1]),r="mailto:"+s):(s=I(e[1]),r=s),{type:"link",raw:e[0],text:s,href:r,tokens:[{type:"text",raw:s,text:s}]}}}url(t){var s;let e;if(e=this.rules.inline.url.exec(t)){let r,i;if(e[2]==="@")r=I(e[0]),i="mailto:"+r;else{let c;do c=e[0],e[0]=((s=this.rules.inline._backpedal.exec(e[0]))==null?void 0:s[0])??"";while(c!==e[0]);r=I(e[0]),e[1]==="www."?i="http://"+e[0]:i=e[0]}return{type:"link",raw:e[0],text:r,href:i,tokens:[{type:"text",raw:r,text:r}]}}}inlineText(t){const e=this.rules.inline.text.exec(t);if(e){let s;return this.lexer.state.inRawBlock?s=e[0]:s=I(e[0]),{type:"text",raw:e[0],text:s}}}}const Or=/^(?: *(?:\n|$))+/,Zr=/^( {4}[^\n]+(?:\n(?: *(?:\n|$))*)?)+/,jr=/^ {0,3}(`{3,}(?=[^`\n]*(?:\n|$))|~{3,})([^\n]*)(?:\n|$)(?:|([\s\S]*?)(?:\n|$))(?: {0,3}\1[~`]* *(?=\n|$)|$)/,ae=/^ {0,3}((?:-[\t ]*){3,}|(?:_[ \t]*){3,}|(?:\*[ \t]*){3,})(?:\n+|$)/,Mr=/^ {0,3}(#{1,6})(?=\s|$)(.*)(?:\n+|$)/,xt=/(?:[*+-]|\d{1,9}[.)])/,mt=C(/^(?!bull |blockCode|fences|blockquote|heading|html)((?:.|\n(?!\s*?\n|bull |blockCode|fences|blockquote|heading|html))+?)\n {0,3}(=+|-+) *(?:\n+|$)/).replace(/bull/g,xt).replace(/blockCode/g,/ {4}/).replace(/fences/g,/ {0,3}(?:`{3,}|~{3,})/).replace(/blockquote/g,/ {0,3}>/).replace(/heading/g,/ {0,3}#{1,6}/).replace(/html/g,/ {0,3}<[^\n>]+>\n/).getRegex(),_e=/^([^\n]+(?:\n(?!hr|heading|lheading|blockquote|fences|list|html|table| +\n)[^\n]+)*)/,Nr=/^[^\n]+/,Ie=/(?!\s*\])(?:\\.|[^\[\]\\])+/,Qr=C(/^ {0,3}\[(label)\]: *(?:\n *)?([^<\s][^\s]*|<.*?>)(?:(?: +(?:\n *)?| *\n *)(title))? *(?:\n+|$)/).replace("label",Ie).replace("title",/(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/).getRegex(),Wr=C(/^( {0,3}bull)([ \t][^\n]+?)?(?:\n|$)/).replace(/bull/g,xt).getRegex(),me="address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|search|section|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul",Be=/<!--(?:-?>|[\s\S]*?(?:-->|$))/,Ur=C("^ {0,3}(?:<(script|pre|style|textarea)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)|comment[^\\n]*(\\n+|$)|<\\?[\\s\\S]*?(?:\\?>\\n*|$)|<![A-Z][\\s\\S]*?(?:>\\n*|$)|<!\\[CDATA\\[[\\s\\S]*?(?:\\]\\]>\\n*|$)|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:(?:\\n *)+\\n|$)|<(?!script|pre|style|textarea)([a-z][\\w-]*)(?:attribute)*? */?>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$)|</(?!script|pre|style|textarea)[a-z][\\w-]*\\s*>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$))","i").replace("comment",Be).replace("tag",me).replace("attribute",/ +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex(),wt=C(_e).replace("hr",ae).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("|table","").replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",me).getRegex(),Hr=C(/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/).replace("paragraph",wt).getRegex(),De={blockquote:Hr,code:Zr,def:Qr,fences:jr,heading:Mr,hr:ae,html:Ur,lheading:mt,list:Wr,newline:Or,paragraph:wt,table:ie,text:Nr},ht=C("^ *([^\\n ].*)\\n {0,3}((?:\\| *)?:?-+:? *(?:\\| *:?-+:? *)*(?:\\| *)?)(?:\\n((?:(?! *\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)").replace("hr",ae).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("blockquote"," {0,3}>").replace("code"," {4}[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",me).getRegex(),Gr={...De,table:ht,paragraph:C(_e).replace("hr",ae).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("table",ht).replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",me).getRegex()},Kr={...De,html:C(`^ *(?:comment *(?:\\n|\\s*$)|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)|<tag(?:"[^"]*"|'[^']*'|\\s[^'"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))`).replace("comment",Be).replace(/tag/g,"(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b").getRegex(),def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/,heading:/^(#{1,6})(.*)(?:\n+|$)/,fences:ie,lheading:/^(.+?)\n {0,3}(=+|-+) *(?:\n+|$)/,paragraph:C(_e).replace("hr",ae).replace("heading",` *#{1,6} *[^
]`).replace("lheading",mt).replace("|table","").replace("blockquote"," {0,3}>").replace("|fences","").replace("|list","").replace("|html","").replace("|tag","").getRegex()},$t=/^\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/,Xr=/^(`+)([^`]|[^`][\s\S]*?[^`])\1(?!`)/,yt=/^( {2,}|\\)\n(?!\s*$)/,Vr=/^(`+|[^`])(?:(?= {2,}\n)|[\s\S]*?(?:(?=[\\<!\[`*_]|\b_|$)|[^ ](?= {2,}\n)))/,oe="\\p{P}\\p{S}",Jr=C(/^((?![*_])[\spunctuation])/,"u").replace(/punctuation/g,oe).getRegex(),Yr=/\[[^[\]]*?\]\([^\(\)]*?\)|`[^`]*?`|<[^<>]*?>/g,es=C(/^(?:\*+(?:((?!\*)[punct])|[^\s*]))|^_+(?:((?!_)[punct])|([^\s_]))/,"u").replace(/punct/g,oe).getRegex(),ts=C("^[^_*]*?__[^_*]*?\\*[^_*]*?(?=__)|[^*]+(?=[^*])|(?!\\*)[punct](\\*+)(?=[\\s]|$)|[^punct\\s](\\*+)(?!\\*)(?=[punct\\s]|$)|(?!\\*)[punct\\s](\\*+)(?=[^punct\\s])|[\\s](\\*+)(?!\\*)(?=[punct])|(?!\\*)[punct](\\*+)(?!\\*)(?=[punct])|[^punct\\s](\\*+)(?=[^punct\\s])","gu").replace(/punct/g,oe).getRegex(),ns=C("^[^_*]*?\\*\\*[^_*]*?_[^_*]*?(?=\\*\\*)|[^_]+(?=[^_])|(?!_)[punct](_+)(?=[\\s]|$)|[^punct\\s](_+)(?!_)(?=[punct\\s]|$)|(?!_)[punct\\s](_+)(?=[^punct\\s])|[\\s](_+)(?!_)(?=[punct])|(?!_)[punct](_+)(?!_)(?=[punct])","gu").replace(/punct/g,oe).getRegex(),rs=C(/\\([punct])/,"gu").replace(/punct/g,oe).getRegex(),ss=C(/^<(scheme:[^\s\x00-\x1f<>]*|email)>/).replace("scheme",/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/).replace("email",/[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/).getRegex(),is=C(Be).replace("(?:-->|$)","-->").getRegex(),ls=C("^comment|^</[a-zA-Z][\\w:-]*\\s*>|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>|^<\\?[\\s\\S]*?\\?>|^<![a-zA-Z]+\\s[\\s\\S]*?>|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>").replace("comment",is).replace("attribute",/\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/).getRegex(),be=/(?:\[(?:\\.|[^\[\]\\])*\]|\\.|`[^`]*`|[^\[\]\\`])*?/,as=C(/^!?\[(label)\]\(\s*(href)(?:\s+(title))?\s*\)/).replace("label",be).replace("href",/<(?:\\.|[^\n<>\\])+>|[^\s\x00-\x1f]*/).replace("title",/"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/).getRegex(),vt=C(/^!?\[(label)\]\[(ref)\]/).replace("label",be).replace("ref",Ie).getRegex(),At=C(/^!?\[(ref)\](?:\[\])?/).replace("ref",Ie).getRegex(),os=C("reflink|nolink(?!\\()","g").replace("reflink",vt).replace("nolink",At).getRegex(),qe={_backpedal:ie,anyPunctuation:rs,autolink:ss,blockSkip:Yr,br:yt,code:Xr,del:ie,emStrongLDelim:es,emStrongRDelimAst:ts,emStrongRDelimUnd:ns,escape:$t,link:as,nolink:At,punctuation:Jr,reflink:vt,reflinkSearch:os,tag:ls,text:Vr,url:ie},cs={...qe,link:C(/^!?\[(label)\]\((.*?)\)/).replace("label",be).getRegex(),reflink:C(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace("label",be).getRegex()},Ce={...qe,escape:C($t).replace("])","~|])").getRegex(),url:C(/^((?:ftp|https?):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/,"i").replace("email",/[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/).getRegex(),_backpedal:/(?:[^?!.,:;*_'"~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_'"~)]+(?!$))+/,del:/^(~~?)(?=[^\s~])([\s\S]*?[^\s~])\1(?=[^~]|$)/,text:/^([`~]+|[^`~])(?:(?= {2,}\n)|(?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)|[\s\S]*?(?:(?=[\\<!\[`*~_]|\b_|https?:\/\/|ftp:\/\/|www\.|$)|[^ ](?= {2,}\n)|[^a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-](?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)))/},us={...Ce,br:C(yt).replace("{2,}","*").getRegex(),text:C(Ce.text).replace("\\b_","\\b_| {2,}\\n").replace(/\{2,\}/g,"*").getRegex()},de={normal:De,gfm:Gr,pedantic:Kr},re={normal:qe,gfm:Ce,breaks:us,pedantic:cs};class q{constructor(t){z(this,"tokens");z(this,"options");z(this,"state");z(this,"tokenizer");z(this,"inlineQueue");this.tokens=[],this.tokens.links=Object.create(null),this.options=t||N,this.options.tokenizer=this.options.tokenizer||new ke,this.tokenizer=this.options.tokenizer,this.tokenizer.options=this.options,this.tokenizer.lexer=this,this.inlineQueue=[],this.state={inLink:!1,inRawBlock:!1,top:!0};const e={block:de.normal,inline:re.normal};this.options.pedantic?(e.block=de.pedantic,e.inline=re.pedantic):this.options.gfm&&(e.block=de.gfm,this.options.breaks?e.inline=re.breaks:e.inline=re.gfm),this.tokenizer.rules=e}static get rules(){return{block:de,inline:re}}static lex(t,e){return new q(e).lex(t)}static lexInline(t,e){return new q(e).inlineTokens(t)}lex(t){t=t.replace(/\r\n|\r/g,`
`),this.blockTokens(t,this.tokens);for(let e=0;e<this.inlineQueue.length;e++){const s=this.inlineQueue[e];this.inlineTokens(s.src,s.tokens)}return this.inlineQueue=[],this.tokens}blockTokens(t,e=[],s=!1){this.options.pedantic?t=t.replace(/\t/g,"    ").replace(/^ +$/gm,""):t=t.replace(/^( *)(\t+)/gm,(h,p,d)=>p+"    ".repeat(d.length));let r,i,c;for(;t;)if(!(this.options.extensions&&this.options.extensions.block&&this.options.extensions.block.some(h=>(r=h.call({lexer:this},t,e))?(t=t.substring(r.raw.length),e.push(r),!0):!1))){if(r=this.tokenizer.space(t)){t=t.substring(r.raw.length),r.raw.length===1&&e.length>0?e[e.length-1].raw+=`
`:e.push(r);continue}if(r=this.tokenizer.code(t)){t=t.substring(r.raw.length),i=e[e.length-1],i&&(i.type==="paragraph"||i.type==="text")?(i.raw+=`
`+r.raw,i.text+=`
`+r.text,this.inlineQueue[this.inlineQueue.length-1].src=i.text):e.push(r);continue}if(r=this.tokenizer.fences(t)){t=t.substring(r.raw.length),e.push(r);continue}if(r=this.tokenizer.heading(t)){t=t.substring(r.raw.length),e.push(r);continue}if(r=this.tokenizer.hr(t)){t=t.substring(r.raw.length),e.push(r);continue}if(r=this.tokenizer.blockquote(t)){t=t.substring(r.raw.length),e.push(r);continue}if(r=this.tokenizer.list(t)){t=t.substring(r.raw.length),e.push(r);continue}if(r=this.tokenizer.html(t)){t=t.substring(r.raw.length),e.push(r);continue}if(r=this.tokenizer.def(t)){t=t.substring(r.raw.length),i=e[e.length-1],i&&(i.type==="paragraph"||i.type==="text")?(i.raw+=`
`+r.raw,i.text+=`
`+r.raw,this.inlineQueue[this.inlineQueue.length-1].src=i.text):this.tokens.links[r.tag]||(this.tokens.links[r.tag]={href:r.href,title:r.title});continue}if(r=this.tokenizer.table(t)){t=t.substring(r.raw.length),e.push(r);continue}if(r=this.tokenizer.lheading(t)){t=t.substring(r.raw.length),e.push(r);continue}if(c=t,this.options.extensions&&this.options.extensions.startBlock){let h=1/0;const p=t.slice(1);let d;this.options.extensions.startBlock.forEach(g=>{d=g.call({lexer:this},p),typeof d=="number"&&d>=0&&(h=Math.min(h,d))}),h<1/0&&h>=0&&(c=t.substring(0,h+1))}if(this.state.top&&(r=this.tokenizer.paragraph(c))){i=e[e.length-1],s&&(i==null?void 0:i.type)==="paragraph"?(i.raw+=`
`+r.raw,i.text+=`
`+r.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=i.text):e.push(r),s=c.length!==t.length,t=t.substring(r.raw.length);continue}if(r=this.tokenizer.text(t)){t=t.substring(r.raw.length),i=e[e.length-1],i&&i.type==="text"?(i.raw+=`
`+r.raw,i.text+=`
`+r.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=i.text):e.push(r);continue}if(t){const h="Infinite loop on byte: "+t.charCodeAt(0);if(this.options.silent){console.error(h);break}else throw new Error(h)}}return this.state.top=!0,e}inline(t,e=[]){return this.inlineQueue.push({src:t,tokens:e}),e}inlineTokens(t,e=[]){let s,r,i,c=t,h,p,d;if(this.tokens.links){const g=Object.keys(this.tokens.links);if(g.length>0)for(;(h=this.tokenizer.rules.inline.reflinkSearch.exec(c))!=null;)g.includes(h[0].slice(h[0].lastIndexOf("[")+1,-1))&&(c=c.slice(0,h.index)+"["+"a".repeat(h[0].length-2)+"]"+c.slice(this.tokenizer.rules.inline.reflinkSearch.lastIndex))}for(;(h=this.tokenizer.rules.inline.blockSkip.exec(c))!=null;)c=c.slice(0,h.index)+"["+"a".repeat(h[0].length-2)+"]"+c.slice(this.tokenizer.rules.inline.blockSkip.lastIndex);for(;(h=this.tokenizer.rules.inline.anyPunctuation.exec(c))!=null;)c=c.slice(0,h.index)+"++"+c.slice(this.tokenizer.rules.inline.anyPunctuation.lastIndex);for(;t;)if(p||(d=""),p=!1,!(this.options.extensions&&this.options.extensions.inline&&this.options.extensions.inline.some(g=>(s=g.call({lexer:this},t,e))?(t=t.substring(s.raw.length),e.push(s),!0):!1))){if(s=this.tokenizer.escape(t)){t=t.substring(s.raw.length),e.push(s);continue}if(s=this.tokenizer.tag(t)){t=t.substring(s.raw.length),r=e[e.length-1],r&&s.type==="text"&&r.type==="text"?(r.raw+=s.raw,r.text+=s.text):e.push(s);continue}if(s=this.tokenizer.link(t)){t=t.substring(s.raw.length),e.push(s);continue}if(s=this.tokenizer.reflink(t,this.tokens.links)){t=t.substring(s.raw.length),r=e[e.length-1],r&&s.type==="text"&&r.type==="text"?(r.raw+=s.raw,r.text+=s.text):e.push(s);continue}if(s=this.tokenizer.emStrong(t,c,d)){t=t.substring(s.raw.length),e.push(s);continue}if(s=this.tokenizer.codespan(t)){t=t.substring(s.raw.length),e.push(s);continue}if(s=this.tokenizer.br(t)){t=t.substring(s.raw.length),e.push(s);continue}if(s=this.tokenizer.del(t)){t=t.substring(s.raw.length),e.push(s);continue}if(s=this.tokenizer.autolink(t)){t=t.substring(s.raw.length),e.push(s);continue}if(!this.state.inLink&&(s=this.tokenizer.url(t))){t=t.substring(s.raw.length),e.push(s);continue}if(i=t,this.options.extensions&&this.options.extensions.startInline){let g=1/0;const m=t.slice(1);let A;this.options.extensions.startInline.forEach(T=>{A=T.call({lexer:this},m),typeof A=="number"&&A>=0&&(g=Math.min(g,A))}),g<1/0&&g>=0&&(i=t.substring(0,g+1))}if(s=this.tokenizer.inlineText(i)){t=t.substring(s.raw.length),s.raw.slice(-1)!=="_"&&(d=s.raw.slice(-1)),p=!0,r=e[e.length-1],r&&r.type==="text"?(r.raw+=s.raw,r.text+=s.text):e.push(s);continue}if(t){const g="Infinite loop on byte: "+t.charCodeAt(0);if(this.options.silent){console.error(g);break}else throw new Error(g)}}return e}}class xe{constructor(t){z(this,"options");z(this,"parser");this.options=t||N}space(t){return""}code({text:t,lang:e,escaped:s}){var c;const r=(c=(e||"").match(/^\S*/))==null?void 0:c[0],i=t.replace(/\n$/,"")+`
`;return r?'<pre><code class="language-'+I(r)+'">'+(s?i:I(i,!0))+`</code></pre>
`:"<pre><code>"+(s?i:I(i,!0))+`</code></pre>
`}blockquote({tokens:t}){return`<blockquote>
${this.parser.parse(t)}</blockquote>
`}html({text:t}){return t}heading({tokens:t,depth:e}){return`<h${e}>${this.parser.parseInline(t)}</h${e}>
`}hr(t){return`<hr>
`}list(t){const e=t.ordered,s=t.start;let r="";for(let h=0;h<t.items.length;h++){const p=t.items[h];r+=this.listitem(p)}const i=e?"ol":"ul",c=e&&s!==1?' start="'+s+'"':"";return"<"+i+c+`>
`+r+"</"+i+`>
`}listitem(t){let e="";if(t.task){const s=this.checkbox({checked:!!t.checked});t.loose?t.tokens.length>0&&t.tokens[0].type==="paragraph"?(t.tokens[0].text=s+" "+t.tokens[0].text,t.tokens[0].tokens&&t.tokens[0].tokens.length>0&&t.tokens[0].tokens[0].type==="text"&&(t.tokens[0].tokens[0].text=s+" "+t.tokens[0].tokens[0].text)):t.tokens.unshift({type:"text",raw:s+" ",text:s+" "}):e+=s+" "}return e+=this.parser.parse(t.tokens,!!t.loose),`<li>${e}</li>
`}checkbox({checked:t}){return"<input "+(t?'checked="" ':"")+'disabled="" type="checkbox">'}paragraph({tokens:t}){return`<p>${this.parser.parseInline(t)}</p>
`}table(t){let e="",s="";for(let i=0;i<t.header.length;i++)s+=this.tablecell(t.header[i]);e+=this.tablerow({text:s});let r="";for(let i=0;i<t.rows.length;i++){const c=t.rows[i];s="";for(let h=0;h<c.length;h++)s+=this.tablecell(c[h]);r+=this.tablerow({text:s})}return r&&(r=`<tbody>${r}</tbody>`),`<table>
<thead>
`+e+`</thead>
`+r+`</table>
`}tablerow({text:t}){return`<tr>
${t}</tr>
`}tablecell(t){const e=this.parser.parseInline(t.tokens),s=t.header?"th":"td";return(t.align?`<${s} align="${t.align}">`:`<${s}>`)+e+`</${s}>
`}strong({tokens:t}){return`<strong>${this.parser.parseInline(t)}</strong>`}em({tokens:t}){return`<em>${this.parser.parseInline(t)}</em>`}codespan({text:t}){return`<code>${t}</code>`}br(t){return"<br>"}del({tokens:t}){return`<del>${this.parser.parseInline(t)}</del>`}link({href:t,title:e,tokens:s}){const r=this.parser.parseInline(s),i=ot(t);if(i===null)return r;t=i;let c='<a href="'+t+'"';return e&&(c+=' title="'+e+'"'),c+=">"+r+"</a>",c}image({href:t,title:e,text:s}){const r=ot(t);if(r===null)return s;t=r;let i=`<img src="${t}" alt="${s}"`;return e&&(i+=` title="${e}"`),i+=">",i}text(t){return"tokens"in t&&t.tokens?this.parser.parseInline(t.tokens):t.text}}class Le{strong({text:t}){return t}em({text:t}){return t}codespan({text:t}){return t}del({text:t}){return t}html({text:t}){return t}text({text:t}){return t}link({text:t}){return""+t}image({text:t}){return""+t}br(){return""}}class L{constructor(t){z(this,"options");z(this,"renderer");z(this,"textRenderer");this.options=t||N,this.options.renderer=this.options.renderer||new xe,this.renderer=this.options.renderer,this.renderer.options=this.options,this.renderer.parser=this,this.textRenderer=new Le}static parse(t,e){return new L(e).parse(t)}static parseInline(t,e){return new L(e).parseInline(t)}parse(t,e=!0){let s="";for(let r=0;r<t.length;r++){const i=t[r];if(this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[i.type]){const h=i,p=this.options.extensions.renderers[h.type].call({parser:this},h);if(p!==!1||!["space","hr","heading","code","table","blockquote","list","html","paragraph","text"].includes(h.type)){s+=p||"";continue}}const c=i;switch(c.type){case"space":{s+=this.renderer.space(c);continue}case"hr":{s+=this.renderer.hr(c);continue}case"heading":{s+=this.renderer.heading(c);continue}case"code":{s+=this.renderer.code(c);continue}case"table":{s+=this.renderer.table(c);continue}case"blockquote":{s+=this.renderer.blockquote(c);continue}case"list":{s+=this.renderer.list(c);continue}case"html":{s+=this.renderer.html(c);continue}case"paragraph":{s+=this.renderer.paragraph(c);continue}case"text":{let h=c,p=this.renderer.text(h);for(;r+1<t.length&&t[r+1].type==="text";)h=t[++r],p+=`
`+this.renderer.text(h);e?s+=this.renderer.paragraph({type:"paragraph",raw:p,text:p,tokens:[{type:"text",raw:p,text:p}]}):s+=p;continue}default:{const h='Token with "'+c.type+'" type was not found.';if(this.options.silent)return console.error(h),"";throw new Error(h)}}}return s}parseInline(t,e){e=e||this.renderer;let s="";for(let r=0;r<t.length;r++){const i=t[r];if(this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[i.type]){const h=this.options.extensions.renderers[i.type].call({parser:this},i);if(h!==!1||!["escape","html","link","image","strong","em","codespan","br","del","text"].includes(i.type)){s+=h||"";continue}}const c=i;switch(c.type){case"escape":{s+=e.text(c);break}case"html":{s+=e.html(c);break}case"link":{s+=e.link(c);break}case"image":{s+=e.image(c);break}case"strong":{s+=e.strong(c);break}case"em":{s+=e.em(c);break}case"codespan":{s+=e.codespan(c);break}case"br":{s+=e.br(c);break}case"del":{s+=e.del(c);break}case"text":{s+=e.text(c);break}default:{const h='Token with "'+c.type+'" type was not found.';if(this.options.silent)return console.error(h),"";throw new Error(h)}}}return s}}class le{constructor(t){z(this,"options");this.options=t||N}preprocess(t){return t}postprocess(t){return t}processAllTokens(t){return t}}z(le,"passThroughHooks",new Set(["preprocess","postprocess","processAllTokens"]));var F,St,ze,Tt;class hs{constructor(...t){st(this,F);z(this,"defaults",Ee());z(this,"options",this.setOptions);z(this,"parse",te(this,F,ze).call(this,q.lex,L.parse));z(this,"parseInline",te(this,F,ze).call(this,q.lexInline,L.parseInline));z(this,"Parser",L);z(this,"Renderer",xe);z(this,"TextRenderer",Le);z(this,"Lexer",q);z(this,"Tokenizer",ke);z(this,"Hooks",le);this.use(...t)}walkTokens(t,e){var r,i;let s=[];for(const c of t)switch(s=s.concat(e.call(this,c)),c.type){case"table":{const h=c;for(const p of h.header)s=s.concat(this.walkTokens(p.tokens,e));for(const p of h.rows)for(const d of p)s=s.concat(this.walkTokens(d.tokens,e));break}case"list":{const h=c;s=s.concat(this.walkTokens(h.items,e));break}default:{const h=c;(i=(r=this.defaults.extensions)==null?void 0:r.childTokens)!=null&&i[h.type]?this.defaults.extensions.childTokens[h.type].forEach(p=>{const d=h[p].flat(1/0);s=s.concat(this.walkTokens(d,e))}):h.tokens&&(s=s.concat(this.walkTokens(h.tokens,e)))}}return s}use(...t){const e=this.defaults.extensions||{renderers:{},childTokens:{}};return t.forEach(s=>{const r={...s};if(r.async=this.defaults.async||r.async||!1,s.extensions&&(s.extensions.forEach(i=>{if(!i.name)throw new Error("extension name required");if("renderer"in i){const c=e.renderers[i.name];c?e.renderers[i.name]=function(...h){let p=i.renderer.apply(this,h);return p===!1&&(p=c.apply(this,h)),p}:e.renderers[i.name]=i.renderer}if("tokenizer"in i){if(!i.level||i.level!=="block"&&i.level!=="inline")throw new Error("extension level must be 'block' or 'inline'");const c=e[i.level];c?c.unshift(i.tokenizer):e[i.level]=[i.tokenizer],i.start&&(i.level==="block"?e.startBlock?e.startBlock.push(i.start):e.startBlock=[i.start]:i.level==="inline"&&(e.startInline?e.startInline.push(i.start):e.startInline=[i.start]))}"childTokens"in i&&i.childTokens&&(e.childTokens[i.name]=i.childTokens)}),r.extensions=e),s.renderer){const i=this.defaults.renderer||new xe(this.defaults);for(const c in s.renderer){if(!(c in i))throw new Error(`renderer '${c}' does not exist`);if(["options","parser"].includes(c))continue;const h=c;let p=s.renderer[h];const d=i[h];i[h]=(...g)=>{s.useNewRenderer||(p=te(this,F,St).call(this,p,h,i));let m=p.apply(i,g);return m===!1&&(m=d.apply(i,g)),m||""}}r.renderer=i}if(s.tokenizer){const i=this.defaults.tokenizer||new ke(this.defaults);for(const c in s.tokenizer){if(!(c in i))throw new Error(`tokenizer '${c}' does not exist`);if(["options","rules","lexer"].includes(c))continue;const h=c,p=s.tokenizer[h],d=i[h];i[h]=(...g)=>{let m=p.apply(i,g);return m===!1&&(m=d.apply(i,g)),m}}r.tokenizer=i}if(s.hooks){const i=this.defaults.hooks||new le;for(const c in s.hooks){if(!(c in i))throw new Error(`hook '${c}' does not exist`);if(c==="options")continue;const h=c,p=s.hooks[h],d=i[h];le.passThroughHooks.has(c)?i[h]=g=>{if(this.defaults.async)return Promise.resolve(p.call(i,g)).then(A=>d.call(i,A));const m=p.call(i,g);return d.call(i,m)}:i[h]=(...g)=>{let m=p.apply(i,g);return m===!1&&(m=d.apply(i,g)),m}}r.hooks=i}if(s.walkTokens){const i=this.defaults.walkTokens,c=s.walkTokens;r.walkTokens=function(h){let p=[];return p.push(c.call(this,h)),i&&(p=p.concat(i.call(this,h))),p}}this.defaults={...this.defaults,...r}}),this}setOptions(t){return this.defaults={...this.defaults,...t},this}lexer(t,e){return q.lex(t,e??this.defaults)}parser(t,e){return L.parse(t,e??this.defaults)}}F=new WeakSet,St=function(t,e,s){switch(e){case"heading":return function(r){return!r.type||r.type!==e?t.apply(this,arguments):t.call(this,s.parser.parseInline(r.tokens),r.depth,qr(s.parser.parseInline(r.tokens,s.parser.textRenderer)))};case"code":return function(r){return!r.type||r.type!==e?t.apply(this,arguments):t.call(this,r.text,r.lang,!!r.escaped)};case"table":return function(r){if(!r.type||r.type!==e)return t.apply(this,arguments);let i="",c="";for(let p=0;p<r.header.length;p++)c+=this.tablecell({text:r.header[p].text,tokens:r.header[p].tokens,header:!0,align:r.align[p]});i+=this.tablerow({text:c});let h="";for(let p=0;p<r.rows.length;p++){const d=r.rows[p];c="";for(let g=0;g<d.length;g++)c+=this.tablecell({text:d[g].text,tokens:d[g].tokens,header:!1,align:r.align[g]});h+=this.tablerow({text:c})}return t.call(this,i,h)};case"blockquote":return function(r){if(!r.type||r.type!==e)return t.apply(this,arguments);const i=this.parser.parse(r.tokens);return t.call(this,i)};case"list":return function(r){if(!r.type||r.type!==e)return t.apply(this,arguments);const i=r.ordered,c=r.start,h=r.loose;let p="";for(let d=0;d<r.items.length;d++){const g=r.items[d],m=g.checked,A=g.task;let T="";if(g.task){const S=this.checkbox({checked:!!m});h?g.tokens.length>0&&g.tokens[0].type==="paragraph"?(g.tokens[0].text=S+" "+g.tokens[0].text,g.tokens[0].tokens&&g.tokens[0].tokens.length>0&&g.tokens[0].tokens[0].type==="text"&&(g.tokens[0].tokens[0].text=S+" "+g.tokens[0].tokens[0].text)):g.tokens.unshift({type:"text",text:S+" "}):T+=S+" "}T+=this.parser.parse(g.tokens,h),p+=this.listitem({type:"list_item",raw:T,text:T,task:A,checked:!!m,loose:h,tokens:g.tokens})}return t.call(this,p,i,c)};case"html":return function(r){return!r.type||r.type!==e?t.apply(this,arguments):t.call(this,r.text,r.block)};case"paragraph":return function(r){return!r.type||r.type!==e?t.apply(this,arguments):t.call(this,this.parser.parseInline(r.tokens))};case"escape":return function(r){return!r.type||r.type!==e?t.apply(this,arguments):t.call(this,r.text)};case"link":return function(r){return!r.type||r.type!==e?t.apply(this,arguments):t.call(this,r.href,r.title,this.parser.parseInline(r.tokens))};case"image":return function(r){return!r.type||r.type!==e?t.apply(this,arguments):t.call(this,r.href,r.title,r.text)};case"strong":return function(r){return!r.type||r.type!==e?t.apply(this,arguments):t.call(this,this.parser.parseInline(r.tokens))};case"em":return function(r){return!r.type||r.type!==e?t.apply(this,arguments):t.call(this,this.parser.parseInline(r.tokens))};case"codespan":return function(r){return!r.type||r.type!==e?t.apply(this,arguments):t.call(this,r.text)};case"del":return function(r){return!r.type||r.type!==e?t.apply(this,arguments):t.call(this,this.parser.parseInline(r.tokens))};case"text":return function(r){return!r.type||r.type!==e?t.apply(this,arguments):t.call(this,r.text)}}return t},ze=function(t,e){return(s,r)=>{const i={...r},c={...this.defaults,...i};this.defaults.async===!0&&i.async===!1&&(c.silent||console.warn("marked(): The async option was set to true by an extension. The async: false option sent to parse will be ignored."),c.async=!0);const h=te(this,F,Tt).call(this,!!c.silent,!!c.async);if(typeof s>"u"||s===null)return h(new Error("marked(): input parameter is undefined or null"));if(typeof s!="string")return h(new Error("marked(): input parameter is of type "+Object.prototype.toString.call(s)+", string expected"));if(c.hooks&&(c.hooks.options=c),c.async)return Promise.resolve(c.hooks?c.hooks.preprocess(s):s).then(p=>t(p,c)).then(p=>c.hooks?c.hooks.processAllTokens(p):p).then(p=>c.walkTokens?Promise.all(this.walkTokens(p,c.walkTokens)).then(()=>p):p).then(p=>e(p,c)).then(p=>c.hooks?c.hooks.postprocess(p):p).catch(h);try{c.hooks&&(s=c.hooks.preprocess(s));let p=t(s,c);c.hooks&&(p=c.hooks.processAllTokens(p)),c.walkTokens&&this.walkTokens(p,c.walkTokens);let d=e(p,c);return c.hooks&&(d=c.hooks.postprocess(d)),d}catch(p){return h(p)}}},Tt=function(t,e){return s=>{if(s.message+=`
Please report this to https://github.com/markedjs/marked.`,t){const r="<p>An error occurred:</p><pre>"+I(s.message+"",!0)+"</pre>";return e?Promise.resolve(r):r}if(e)return Promise.reject(s);throw s}};const M=new hs;function R(a,t){return M.parse(a,t)}R.options=R.setOptions=function(a){return M.setOptions(a),R.defaults=M.defaults,dt(R.defaults),R};R.getDefaults=Ee;R.defaults=N;R.use=function(...a){return M.use(...a),R.defaults=M.defaults,dt(R.defaults),R};R.walkTokens=function(a,t){return M.walkTokens(a,t)};R.parseInline=M.parseInline;R.Parser=L;R.parser=L.parse;R.Renderer=xe;R.TextRenderer=Le;R.Lexer=q;R.lexer=q.lex;R.Tokenizer=ke;R.Hooks=le;R.parse=R;R.options;R.setOptions;R.use;R.walkTokens;R.parseInline;L.parse;q.lex;R.use(Er());function ps(a,t){const e=s=>{t.innerHTML=R.parse(s.currentTarget.value)};a.addEventListener("change",e),a.addEventListener("input",e)}ps(document.getElementById("md-input-textarea"),document.getElementById("md-output"));
